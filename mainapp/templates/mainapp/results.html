{% extends 'mainapp/base.html' %}
{% load static %}
{% block title %}
<title>Resultados</title>
{% endblock %}
{% block head %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
{% endblock %}
{% block content %}
<div class="white_shd full margin_bottom_30">
    <div class="full graph_head">
        <div class="heading1 margin_0">
            <h2>Resultados</h2>
        </div>
    </div>
    <div class="table_section padding_infor_info">
        <div class="table-responsive-sm">
            <table class="table table-bordered">
                <thead>
                <tr>
                    <th>ID</th>
                    <th>Fecha del diagnostico</th>
                    <th>Puntaje total</th>
                    <th>Link</th>
                </tr>
                </thead>
                <tbody>
                {% for object in data %}
                <tr>
                    <td>{{object.pk}}</td>
                    <td>{{object.created}}</td>
                    <td>{{object.total}}</td>
                    <td><a href="{%url 'mainapp:dashboard' object.pk %}"> Ver grafico de radar</a></td>
                </tr>
                {%endfor%}
                </tbody>
            </table>
        </div>
    </div>
</div>
<canvas id="barChart"></canvas>
<script>
    var canvasElement = document.getElementById("barChart")
    var dates = []
    var scores = []
    {% for object in data %}
    dates.push('{{object.created}}')
    scores.push({{object.total}})
    {%endfor%}
    var config = {
        type: "bar",
        data: {
        labels: dates,
        datasets: [{label: "Puntaje", data:scores}],
        },
    }
    var barChart = new Chart(canvasElement,config)


</script>
{% endblock %}